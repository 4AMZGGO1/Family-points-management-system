# 🏠 家庭积分管理系统

一个基于 PHP + MySQL 的家庭积分管理系统，帮助家长通过积分奖励机制培养孩子的良好习惯。

## ✨ 功能特色

### 🧒 孩子端功能
- **积分查看**: 实时查看当前积分余额
- **任务申请**: 完成任务后提交积分申请，上传证明图片
- **积分商城**: 用积分兑换心仪物品
- **历史记录**: 查看积分变动、申请记录、购买记录
- **任务规则**: 浏览所有可获得的积分任务

### 👨‍👩‍👧 家长端功能
- **申请审核**: 审核孩子的积分申请，通过/拒绝并添加备注
- **规则管理**: 管理积分任务规则（增删改）
- **商城管理**: 管理积分商城商品
- **数据统计**: 查看系统统计信息和积分排行
- **手动调整**: 手动给孩子加分/扣分

## 🛠️ 技术栈

- **后端**: PHP 8.0+
- **数据库**: MySQL 8.0+
- **前端**: HTML5 + CSS3 + Bootstrap 5
- **图标**: Bootstrap Icons
- **部署**: 支持宝塔面板、虚拟主机等

## 📁 项目结构

```
积分系统/
├── index.php              # 孩子端入口页面
├── child/                 # 孩子端页面
│   ├── home.php          # 孩子端首页
│   ├── apply.php         # 申请积分页面
│   ├── shop.php          # 积分商城
│   └── history.php       # 历史记录
├── parent/                # 家长端页面
│   ├── login.php         # 家长登录页
│   ├── dashboard.php     # 管理首页
│   └── review.php        # 审核申请页面
├── includes/              # 核心文件
│   ├── config.php        # 数据库配置
│   ├── functions.php     # 常用函数
│   └── auth.php          # 登录验证
├── assets/                # 静态资源
│   ├── css/              # 样式文件
│   ├── js/               # JavaScript文件
│   └── uploads/          # 上传文件目录
└── SQL/                   # 数据库文件
    └── init.sql          # 数据库初始化脚本
```

## 🚀 快速部署

### 1. 环境要求

- PHP 8.0 或更高版本
- MySQL 8.0 或更高版本
- Web服务器（Apache/Nginx）
- 支持文件上传功能

### 2. 数据库配置

1. 创建数据库：
```sql
CREATE DATABASE points_system CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

2. 导入数据库结构和示例数据：
```bash
mysql -u root -p points_system < SQL/init.sql
```

3. 修改数据库配置：
编辑 `includes/config.php` 文件，修改以下配置：
```php
define('DB_HOST', 'localhost');        // 数据库主机
define('DB_USERNAME', 'root');         // 数据库用户名
define('DB_PASSWORD', '');             // 数据库密码
define('DB_NAME', 'points_system');    // 数据库名称
```

### 3. 文件权限设置

确保以下目录有写入权限：
- `assets/uploads/` - 上传文件目录

**Linux/Unix 系统：**
```bash
chmod 755 assets/uploads
```

**Windows 系统：**
- 右键点击 `assets/uploads` 文件夹
- 选择"属性" -> "安全" -> "编辑"
- 给 IIS_IUSRS 或 Apache 用户添加"完全控制"权限

### 4. 网站配置

1. 将项目文件上传到网站根目录
2. 确保 `index.php` 可以正常访问
3. 访问 `parent/login.php` 进入家长管理后台

## 👤 默认账号

### 家长账号
- **用户名**: admin
- **密码**: admin123
- **角色**: parent

### 孩子账号
- **用户名**: 王文锦
- **密码**: child123
- **角色**: child
- **初始积分**: 100

> ⚠️ **重要说明**: 
> - 孩子端无需登录，直接访问即可使用
> - 密码采用明文存储，部署后请立即修改默认密码！

## 📱 使用说明

### 孩子端使用流程

1. **直接访问**: 打开网站即可直接进入孩子端，无需登录
2. **查看积分**: 在首页查看当前积分余额
3. **完成任务**: 按照任务规则完成相应任务
4. **提交申请**: 在"申请积分"页面选择任务并上传证明
5. **等待审核**: 家长审核通过后自动获得积分
6. **兑换商品**: 在积分商城用积分兑换物品
7. **查看记录**: 在历史记录中查看所有积分变动

### 家长端使用流程

1. **登录管理后台**: 使用家长账号登录
2. **审核申请**: 在"审核申请"页面处理孩子的积分申请
3. **管理规则**: 根据需要添加、修改或删除积分任务规则
4. **管理商城**: 添加、修改积分商城商品
5. **查看统计**: 在首页查看系统统计信息和积分排行

## 🎯 积分规则示例

系统预设了以下积分任务规则：

### 📚 学习类
- 完成作业: +10积分
- 阅读30分钟: +15积分
- 背诵古诗: +5积分

### 🏠 家务类
- 整理房间: +8积分
- 洗碗: +5积分
- 倒垃圾: +3积分

### 🏃 运动类
- 跑步30分钟: +20积分
- 跳绳100下: +10积分
- 做操: +5积分

### 💝 品德类
- 帮助他人: +15积分
- 诚实守信: +10积分
- 礼貌待人: +5积分

## 🛒 商城商品示例

系统预设了以下商城商品：

- 小玩具: 50积分
- 零食: 30积分
- 图书: 100积分
- 游戏时间: 200积分
- 外出游玩: 500积分
- 心仪礼物: 1000积分

## 🔧 自定义配置

### 修改网站标题
编辑各页面的 `<title>` 标签

### 修改积分规则
1. 登录家长管理后台
2. 进入"管理规则"页面
3. 添加、修改或删除任务规则

### 修改商城商品
1. 登录家长管理后台
2. 进入"商城管理"页面
3. 添加、修改或删除商品

### 修改上传限制
编辑 `includes/config.php` 文件：
```php
define('MAX_FILE_SIZE', 5 * 1024 * 1024); // 5MB
```

## 🐛 常见问题

### Q: 无法上传图片？
A: 检查 `assets/uploads/` 目录权限，确保有写入权限

### Q: 数据库连接失败？
A: 检查 `includes/config.php` 中的数据库配置是否正确

### Q: 页面显示乱码？
A: 确保数据库字符集为 utf8mb4，文件编码为 UTF-8

### Q: 忘记密码怎么办？
A: 可以通过数据库直接修改用户密码，或重新导入示例数据

## 🔒 安全建议

1. **修改默认密码**: 部署后立即修改所有默认密码
2. **定期备份**: 定期备份数据库和上传文件
3. **权限控制**: 确保只有授权用户可以访问管理后台
4. **文件上传**: 限制上传文件类型和大小
5. **数据库安全**: 使用强密码，限制数据库访问权限

## 📞 技术支持

如果在部署或使用过程中遇到问题，可以：

1. 检查错误日志
2. 确认环境配置
3. 验证文件权限
4. 检查数据库连接

## 📄 许可证

本项目仅供学习和个人使用，请勿用于商业用途。

---

**祝您使用愉快！** 🎉

通过这个积分系统，帮助孩子在快乐中成长，在积分中进步！